#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/savant/framework/db'

begin
  db = Savant::Framework::DB.new
  warn 'WARNING: destructive migration â€” dropping and recreating all tables'
  db.migrate_tables
  db.ensure_fts
  puts 'DB RESET COMPLETE (tables + FTS ready)'
  exit 0
rescue StandardError => e
  warn "DB ERROR: #{e.class}: #{e.message}"
  exit 1
end
