{
  "agent_intent": {
    "request": {
      "type": "object",
      "required": ["session_id", "goal_text"],
      "properties": {
        "session_id": {"type": "string"},
        "persona": {"type": "string"},
        "driver": {"type": "string"},
        "repo_context": {"type": "object"},
        "memory_state": {"type": "object"},
        "history": {"type": "array", "items": {"type": "string"}},
        "goal_text": {"type": "string"},
        "forced_tool": {"type": ["string", "null"]},
        "max_steps": {"type": "integer"}
      }
    },
    "response": {
      "type": "object",
      "required": ["intent_id", "tool_name"],
      "properties": {
        "intent_id": {"type": "string"},
        "tool_name": {"type": "string"},
        "tool_args": {"type": "object"},
        "finish": {"type": "boolean"},
        "next_prompt": {"type": ["string", "null"]},
        "reasoning": {"type": "string"},
        "trace": {"type": "array", "items": {"type": "object"}},
        "fallback_tool": {"type": ["string", "null"]}
      }
    }
  },
  "workflow_intent": {
    "request": {
      "type": "object",
      "required": ["run_id", "workflow_name", "current_node"],
      "properties": {
        "run_id": {"type": "string"},
        "workflow_name": {"type": "string"},
        "current_node": {"type": "string"},
        "outputs": {"type": "object"},
        "params": {"type": "object"},
        "memory_state": {"type": "object"}
      }
    },
    "response": {
      "type": "object",
      "required": ["intent_id", "next_node"],
      "properties": {
        "intent_id": {"type": "string"},
        "next_node": {"type": "string"},
        "action_type": {"type": "string"},
        "tool_call": {"type": "boolean"},
        "tool_args": {"type": "object"},
        "finish": {"type": "boolean"},
        "reasoning": {"type": "string"},
        "trace": {"type": "array", "items": {"type": "object"}}
      }
    }
  },
  "errors": {
    "invalid_tool": {
      "code": 422,
      "message": "The requested tool is unknown or not registered in MCP."
    },
    "timeout": {
      "code": 504,
      "message": "The reasoning API timed out before producing an intent."
    },
    "unsupported_version": {
      "code": 426,
      "message": "The requested API version is not supported."
    }
  }
}
