name: review_v1
version: "1.0"
description: "Basic code review flow: lint then tests"
steps:
  - id: checkout
    call: ci.checkout
    input_template:
      ref: "{{params.branch}}"

  - id: lint
    call: context.search
    deps: ["checkout"]
    input_template:
      q: "rubocop offenses"
    capture_as: lint_result

  - id: tests
    call: ci.run_tests
    deps: ["lint"]
    input_template:
      ref: "{{params.branch}}"

