---
id: ticket_grooming_v1
name: Ticket Grooming
description: 'Ticket grooming workflow '
driver_version: stable
rules: []
version: 3
steps:
- id: 1
  name: fetch_ticket
  call: jira_get_issue
  input_template:
    key: "{{params.issueKey}}"
  capture_as: ticket
- id: 2
  name: scan_repo_context
  call: fts_search
  deps:
  - 1
  input_template:
    q: "{{params.issueKey}} OR {{ticket.fields.summary}}"
  capture_as: similar_code
- id: 3
  name: enumerate_resources
  call: memory_resources_list
  deps:
  - 1
  input_template:
    repo:
  capture_as: resources
- id: 4
  name: planning_guides
  call: fts_search
  deps:
  - 3
  input_template:
    q: ACCEPTANCE CRITERIA|CONTRIBUTING|DESIGN|ADR|PLAYBOOK|README
  capture_as: guidelines
- id: 5
  name: list_diffs
  call: prompt_say
  deps:
  - 2
  input_template:
    text: look at all the changes in repo and list them file by file.
