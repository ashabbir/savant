steps:
  - name: diff
    tool: git.diff

  - name: cross_repo
    tool: context.fts_search
    with:
      q: "{{ diff.content.0.text }}"

  - name: review
    agent: mr_review
    with:
      goal: "Perform code review with context and highlight risks, tests, and actions."
      diff: "{{ diff }}"
      cross_repo: "{{ cross_repo }}"

  - name: summarize
    agent: summarizer
    with:
      goal: "Summarize the code review into concise human-readable output."
      review: "{{ review }}"
